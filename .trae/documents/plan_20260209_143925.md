# 核心逻辑：按日期归档与每日重置

评估当前架构后，建议通过**逻辑归档（按日期过滤）**的方式来实现需求。这种方式既能满足“新的一天重新开始”的体验，又能方便地回溯历史记录，且无需复杂的数据库迁移。

## 1. 架构调整 (Architecture)
- **数据层**：保持现有的单一存储结构 (`TimeEntry[]`)，所有数据仍存在一起。
- **视图层**：引入“当前选中日期”的状态。
  - **默认视图**：初始化为“今天”。当时间跨过 24:00 进入新的一天时，应用默认加载“今天”，因为今天还没有数据，用户会自动看到一个空白的“新的一天”界面。
  - **归档查看**：通过日期切换器（上一天/下一天），用户可以查看历史数据，这即是“归档查看”功能。

## 2. 前端改造 (Frontend Implementation)

### A. 状态管理 (`App.tsx`)
- 新增 `currentDate` 状态，默认为 `new Date()`。
- 新增过滤逻辑：仅传递 `startTime` 为 `currentDate` 的条目给子组件。

### B. 导航交互 (`App.tsx`)
- 在标题栏添加日期导航组件：
  - `<` (前一天)
  - `当前日期` (如：2023年10月27日)
  - `>` (后一天，如果是今天则禁用)

### C. 组件适配
- **`HistoryList.tsx`**: 接收过滤后的数据。标题从固定的 "Today's Journey" 改为动态显示日期。
- **`DiaryGenerator.tsx`**: 增加 `date` 属性。在生成 AI 日记时，将 Prompt 中的 "today" 替换为选中的具体日期，确保生成的日记与当天内容匹配。

## 3. 预期效果
- **自动归档**：过了零点打开应用，界面自动清空（因为是新的一天），旧数据自动“隐藏”在历史日期中。
- **历史回溯**：点击“前一天”按钮即可查看并管理过往记录。
- **数据安全**：所有数据依然持久化保存在本地，不会丢失。
