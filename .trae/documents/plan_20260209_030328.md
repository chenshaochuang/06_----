# Time Diary - 智能时间日记需求文档 (Neuro-UX Enhanced)

## 1. 产品哲学 (Product Philosophy)
基于**认知心理学**与**脑科学**原理，打造一款"低认知负荷"的记录工具与"高情绪价值"的回顾系统。
*   **降低启动阻力 (Reduction of Friction):** 利用*习惯回路*（Cue-Routine-Reward），将记录动作降至脊髓反射级。
*   **强化情景记忆 (Episodic Memory):** 不仅记录"时长"，更记录"状态"与"能量"，辅助大脑进行记忆编码。
*   **闭环反馈 (Closed Loop):** 通过日记生成，将枯燥的数据转化为自我对话的叙事，提供正向心理暗示。

---

## 2. 核心功能需求 (Functional Requirements)

### 2.1. 极速流状态录入 (Flow State Entry) - 对应需求1
**心理学原理:** 蔡格尼克效应 (Zeigarnik Effect) - 未完成的任务会占据认知带宽。
**脑科学原理:** 减少前额叶皮层 (PFC) 的决策消耗。

*   **[F1.1] 全局唤醒 (Global Shortcut):**
    *   支持 `Alt + J` (或其他快捷键) 随时唤醒输入框，无需寻找应用窗口。
*   **[F1.2] 意图声明 (Implementation Intention):**
    *   输入框提示语不是 "Start"，而是 "What will you focus on?" (你要专注做什么？)。
    *   支持**预判输入**: 根据当前时间段（如早上9点）自动推荐历史常做事项（如"阅读代码"）。
*   **[F1.3] 沉浸式计时器 (Immersive Timer):**
    *   计时开始后，主界面最小化为"胶囊悬浮窗"或"状态栏图标"，仅显示进行中的事项和时间。
    *   **视觉心流**: 随时间推移，背景色有极其微弱的渐变（如冷色到暖色），暗示时间的流逝（Time Perception）。

### 2.2. 结构化结束与能量标记 (Structured Closure) - 对应需求1
**心理学原理:** 峰终定律 (Peak-End Rule) - 人们对一段经历的记忆主要取决于高峰时和结束时的感觉。

*   **[F2.1] 结束确认:**
    *   点击结束时，不仅仅是停止计时，而是弹出一个微交互气泡。
*   **[F2.2] 能量/情绪标记 (Energy/Mood Tagging):**
    *   询问："刚才的状态如何？" (提供3个Emoji: 🔥专注、😐平淡、😫疲惫)。
    *   *价值:* 这不仅是记录，更是让用户此刻进行一次微观的"内省" (Metacognition)。
*   **[F2.3] 自动归类:**
    *   基于历史记录自动归类（如"写代码" -> "工作"），减少分类操作。

### 2.3. 智能神经反射日记 (Neural Reflection Diary) - 对应需求2
**脑科学原理:** 记忆巩固 (Memory Consolidation) - 睡眠前或一天结束时的回顾有助于长期记忆形成。

*   **[F3.1] 视觉化时间轴 (Visual Timeline):**
    *   不是简单的列表，而是类似"DNA电泳图"或"地铁线路图"的时间轴。
    *   用颜色深浅代表[F2.2]中记录的"能量等级"（深色代表高专注，浅色代表休息）。
*   **[F3.2] LLM 叙事生成 (Narrative Generation):**
    *   **一键生成:** 将碎片数据（时间+事件+能量）转化为自然语言日记。
    *   **风格化:**
        *   *成就模式:* "今天你完成了4小时的高强度工作，非常棒！" (多巴胺激励)
        *   *客观模式:* "今日主要时间分配在会议与沟通上。"
    *   **空白填补:** 自动识别未记录的"时间黑洞"，在日记中提示"这段时间似乎在休息或处理杂务"。
*   **[F3.3] 导出与分享:**
    *   支持导出 Markdown/图片，方便存入 Obsidian/Notion 等第二大脑。

---

## 3. 非功能性需求 (Non-Functional Requirements)

*   **隐私优先 (Local First):** 所有数据（特别是日记内容）存储在本地 (SQLite/JSON)，不上传云端，给予用户绝对的安全感。
*   **极简UI (Minimalism):** 遵循 "Less is More"，主色调建议采用像纸张一样的米白色或深空灰（Dark Mode），减少蓝光对昼夜节律的影响。

---

## 4. 实施路线图 (Implementation Roadmap)

### Phase 1: 核心骨架 (MVP)
*   [x] 初始化 Electron + React 项目 (已完成)
*   [ ] 实现基础计时器 (Start/Stop)
*   [ ] 实现本地数据存储 (Electron Store / LowDB)
*   [ ] 实现基础列表展示

### Phase 2: 体验升级
*   [ ] 全局快捷键唤醒
*   [ ] 状态栏/悬浮窗悬浮显示
*   [ ] 能量等级 (Mood) 录入 UI

### Phase 3: 智慧大脑
*   [ ] 引入本地规则或 API 接入 (OpenAI/Gemini) 实现日记润色生成
*   [ ] 数据可视化报表 (热力图)

---

## 待确认事项
是否同意以上需求分析文档？如果同意，我将按照 **Phase 1: 核心骨架** 开始着手开发。
我们将优先实现：**带分类的计时器** 以及 **本地数据持久化**。